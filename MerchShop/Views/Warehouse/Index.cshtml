@using MerchShop.Models.DomainModels
@model MerchShop.Models.WarehousesListViewModel
@{
	ViewData["Title"] = "Warehouse List";
	WarehouseGridData current = Model.CurrentRoute;
	GridData routes = Model.CurrentRoute.Clone();
}

<head>
	<link href="~/css/modal.css" rel="stylesheet" />
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<style>
		thead a {
			text-decoration: none;
		}
	</style>
</head>

<div class="container-fluid">
	<h1 style="text-align: center; display: flex; justify-content: space-between;">
		@ViewData["Title"]
		<button class="btn btn-primary" onclick="openEditModal(0,0,0,0,0,0)">
		<i class="bi bi-plus"></i> Add Warehouse
		</button>
	</h1>
	<br />
	<table class="table">
		<thead style="text-align: center">
			<tr>
				<th>Warehouse Location ID</th>
				<th>
					@{
						routes.SetSortAndDirection(nameof(Warehouse.WarehouseType), current);
					}
					<a asp-action="Index" asp-all-route-data="@routes.ToDictionary()"
					   class="text-black">
						<span style="display: inline-block;">Warehouse Type</span>
						<div style="display: inline-block; vertical-align: middle;">
							<!-- Show sorting arrows based on the current state -->
							@if (current.SortField == nameof(Warehouse.WarehouseType))
							{
								if (current.SortDirection == "asc")
								{
									<i class="bi bi-caret-up-fill"></i>
								}
								else
								{
									<i class="bi bi-caret-down-fill"></i>
								}
							}
							else
							{
								<i class="bi bi-caret-up-fill" style="color:transparent;"></i>
								<i class="bi bi-caret-down-fill" style="color:transparent;"></i>
							}
						</div>
					</a>
				</th>
				<th>
					<a class="text-black">Shelf Number</a>
				</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody style="text-align: center;">
			@foreach (Warehouse warehouse in Model.Warehouses)
			{
				<tr>
					<td>@warehouse.LocationID</td>
					<td>
						<a asp-action="Details" asp-route-id="@warehouse.LocationID" asp-route-slug="@warehouse.WarehouseType.Slug()">
							@warehouse.WarehouseType
						</a>
					</td>

					<td>
						@warehouse.ShelfNumber
					</td>
					<td>
						<a href="#" onclick="openEditModal(@warehouse.LocationID,@warehouse.WarehouseType, @warehouse.ShelfNumber)" class="btn btn-primary">
							<i class="bi bi-pencil"></i> Edit
						</a>
						<a href="#" class="btn btn-danger" onclick="openDeleteModal(@warehouse.LocationID)">
							<i class="bi bi-trash"></i> Delete
						</a>
					</td>
				</tr>
			}
		</tbody>
	</table>
	@{
		routes = current.Clone();
		for (int i = 1; i <= Model.TotalPages; i++)
		{
			routes.PageNumber = i;
			string active = @Nav.Active(i, current.PageNumber);
			<a asp-action="Index" asp-all-route-data="@routes.ToDictionary()"
			   class="btn btn-outline-primary @active">@i</a>
		}
	}
</div>
@*
<!-- Include the Edit Modal -->
@Html.Partial("_EditModal")
@Html.Partial("_DeleteModal") *@